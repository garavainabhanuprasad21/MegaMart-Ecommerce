<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deals - MegaMart</title>
  <link rel="stylesheet" href="index.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdn.jsdelivr.net/npm/lucide/dist/umd/lucide.js"></script>
  <style>
    /* Deals Page Main Content Styles */
    .deals-page {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: calc(100vh - 80px - 100px); /* Adjust for header/footer */
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }

    /* Hero Content */
    .hero-content {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }

    .hero-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), #ff6b35);
    }

    .hero-content h1 {
      font-size: 3rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .hero-content p {
      font-size: 1.2rem;
      color: #666;
      margin-bottom: 1.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-stats {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .hero-stats h1,
    .hero-stats p {
      margin: 0;
    }

    /* Deal of the Day */
    .deal-of-the-day {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      margin-bottom: 3rem;
      position: relative;
      overflow: hidden;
    }

    .deal-of-the-day::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(231, 133, 41, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      transform: translate(50%, -50%);
    }

    .deal-badge {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: linear-gradient(45deg, #ff6b35, #f7931e);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      z-index: 1;
    }

    .deal-content {
      flex: 1;
      margin-top: 2rem;
      min-width: 300px;
    }

    .deal-content h3 {
      font-size: 2.2rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 1rem;
    }

    .deal-content p {
      font-size: 1.1rem;
      color: #666;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .deal-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .price {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-color);
    }

    .old-price {
      font-size: 1.4rem;
      color: #999;
      text-decoration: line-through;
    }

    .discount {
      background: #ff4757;
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .countdown {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      justify-content: flex-start;
    }

    .countdown-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: var(--light-gray);
      padding: 1rem;
      border-radius: 12px;
      min-width: 60px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .countdown-item span {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
    }

    .countdown-item small {
      font-size: 0.8rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .deal-actions {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .deal-btn {
      padding: 0.8rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .deal-btn.primary {
      background: var(--primary-color);
      color: white;
      border: 2px solid var(--primary-color);
    }

    .deal-btn.primary:hover {
      background: var(--primary-hover-color);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(231, 133, 41, 0.3);
    }

    .deal-btn.secondary {
      background: white;
      color: var(--primary-color);
      border: 2px solid var(--primary-color);
    }

    .deal-btn.secondary:hover {
      background: var(--primary-color);
      color: white;
    }

    /* Deal Image */
    .deal-image {
      position: relative;
      flex: 1;
      min-width: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .deal-image img {
      width: 100%;
      max-width: 400px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .deal-sticker {
      position: absolute;
      top: 0.1rem;
      right: 1rem;
      background: #ff4757;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      z-index: 2;
    }

    /* Deal Categories */
    .deal-categories {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      margin-bottom: 3rem;
    }

    .category-tabs {
      display: flex;
      justify-content: space-around;
      gap: 0.5rem;
      flex-wrap: wrap;
      width: 100%;
    }

    .tab-btn {
      padding: 0.5rem 1rem;
      border: 2px solid var(--border-color);
      background: white;
      color: var(--text-color);
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.85rem;
      flex: 1;
      max-width: 160px;
    }

    .tab-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .tab-btn:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    /* Hot Deals */
    .hot-deals {
      width: 100%;
      margin-bottom: 3rem;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    .hot-deals h3 {
      text-align: center;
      font-size: 2rem;
      color: var(--text-color);
      margin-bottom: 1.5rem;
    }

    .product {
      position: relative;
      background: #fff;
      border-radius: 12px;
      padding: 1rem 1rem 1.6rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none;
      transition: box-shadow 0.3s ease;
    }

    .product:hover {
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.18);
    }

    .img-wrapper {
      width: 100%;
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .img-wrapper img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 12px;
      display: block;
    }

    .product:hover .img-wrapper img {
      transform: scale(1.05);
    }

    .product-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: var(--primary-color);
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      z-index: 1;
    }

    .product-badge.bestseller {
      background: #ff6b35;
    }

    .product-badge.discount {
      background: #ff4757;
    }

    .product-badge.new {
      background: #2ed573;
    }

    .product-badge.trending {
      background: #ffa502;
    }

    .product-badge.hot {
      background: #ff3838;
    }

    .product-badge.bundle {
      background: #3742fa;
    }

    /* Product Info */
    .product-info {
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 0.4rem;
    }

    .product-info h3 {
      font-size: 1.25rem;
      margin-bottom: 0.3rem;
      color: var(--text-color);
      text-align: center;
      font-weight: 700;
    }

    .rating {
      font-size: 1.1rem;
      color: #ffbf00;
      margin-bottom: 0.8rem;
      text-align: center;
      user-select: none;
      letter-spacing: 1.3px;
    }

    .price-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.3rem;
      margin: 0;
    }

    .price {
      font-weight: 700;
      font-size: 1.15rem;
      color: var(--primary-color);
      margin-bottom: 0.3rem;
      text-align: center;
    }

    .old-price {
      font-size: 0.9rem;
      color: #999;
      text-decoration: line-through;
      text-align: center;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: var(--light-gray);
      border-radius: 3px;
      overflow: hidden;
      margin: 0.3rem 0;
    }

    .progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), #d3d3d3);
      border-radius: 3px;
    }

    .progress-text {
      font-size: 0.85rem;
      color: var(--primary-color);
      text-align: center;
      margin: 0;
      font-weight: 500;
    }

    .btn.cart {
      background-color: var(--primary-color);
      padding: 0.5rem 1.2rem;
      color: white;
      border: none;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      transition: background-color 0.3s ease;
      user-select: none;
      font-size: 1rem;
      width: 100%;
      max-width: 180px;
      text-align: center;
      margin-top: auto;
    }

    .btn.cart:hover {
      background-color: var(--primary-hover-color);
    }

    /* Newsletter Section */
    .newsletter-section {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .newsletter-content h3 {
      font-size: 1.8rem;
      color: var(--text-color);
      margin-bottom: 1rem;
    }

    .newsletter-content p {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 1.5rem;
    }

    .newsletter-form {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .newsletter-form input {
      flex: 1;
      min-width: 250px;
      padding: 0.8rem 1rem;
      border: 2px solid var(--border-color);
      border-radius: 25px;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.3s ease;
    }

    .newsletter-form input:focus {
      border-color: var(--primary-color);
    }

    .newsletter-form button {
      padding: 0.8rem 1.5rem;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      font-size: 1rem;
    }

    .newsletter-form button:hover {
      background: var(--primary-hover-color);
    }

    /* Hero Stats */
    .hero-stats div {
      text-align: center;
    }

    .hero-stats h2 {
      font-size: 2rem;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }

    .hero-stats p {
      font-size: 1rem;
      color: #666;
    }

    /* Product Grid */
    .product-grid {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }

    @media (max-width: 1200px) {
      .product-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 1.2rem;
      }
    }

    @media (max-width: 900px) {
      .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }
    }

    @media (max-width: 600px) {
      .product-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
    }

    /* Responsive Media Queries */
    @media (max-width: 900px) {
      .deals-page {
        padding: 1rem 0;
      }

      .hero-content {
        padding: 1.5rem;
        margin-bottom: 2rem;
      }

      .hero-content h1 {
        font-size: 2.2rem;
      }

      .hero-content p {
        font-size: 1rem;
      }

      .hero-stats {
        gap: 1rem;
        justify-content: center;
      }

      .hero-stats div {
        min-width: auto;
      }

      .deal-of-the-day {
        padding: 1rem;
        flex-direction: column;
        text-align: center;
      }

      .deal-badge {
        top: 0.5rem;
        left: 0.5rem;
        font-size: 0.8rem;
        padding: 0.3rem 0.8rem;
      }

      .deal-sticker {
        top: 0.5rem;
        right: 0.5rem;
        font-size: 0.8rem;
        padding: 0.3rem 0.8rem;
      }

      .deal-content,
      .deal-image {
        min-width: auto;
        max-width: 100%;
      }

      .deal-image img {
        max-width: 250px;
        margin-top: 1rem;
      }

      .countdown {
        justify-content: center;
      }

      .deal-actions {
        justify-content: center;
      }

      .category-tabs {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .tab-btn {
        min-width: 200px;
      }

      .hot-deals {
        padding: 0 1rem;
      }

      .product {
        padding: 1rem 1rem 1.6rem;
      }

      .img-wrapper {
        margin-bottom: 1rem;
      }

      .img-wrapper img {
        height: 180px;
      }

      .product-info {
        padding: 0;
        gap: 0.4rem;
      }

      .product-info h3 {
        font-size: 1.25rem;
      }

      .price {
        font-size: 1.15rem;
      }

      .price-info {
        gap: 0.3rem;
      }

      .progress-bar {
        height: 6px;
        margin: 0.3rem 0;
        border-radius: 3px;
      }

      .progress-text {
        font-size: 0.85rem;
      }

      .btn.cart {
        padding: 0.5rem 1.2rem;
        font-size: 1rem;
        width: 100%;
        max-width: 180px;
        text-align: center;
        margin-top: auto;
        border-radius: 25px;
      }

      .newsletter-form {
        flex-direction: column;
        align-items: center;
      }

      .newsletter-form input {
        min-width: auto;
        width: 100%;
        max-width: 300px;
      }
    }

    @media (max-width: 600px) {
      .hero-content h1 {
        font-size: 1.8rem;
      }

      .deal-content h3 {
        font-size: 1.8rem;
      }

      .price {
        font-size: 1.5rem;
      }

      .countdown-item {
        min-width: 50px;
        padding: 0.5rem;
      }

      .countdown-item span {
        font-size: 1.2rem;
      }

      .product h3 {
        font-size: 1.25rem;
      }

      .img-wrapper {
        margin-bottom: 1rem;
      }

      .img-wrapper img {
        height: 180px;
      }

      .product-info {
        padding: 0;
        gap: 0.4rem;
      }

      .product-info h3 {
        font-size: 1.25rem;
      }

      .price {
        font-size: 1.15rem;
      }

      .price-info {
        gap: 0.3rem;
      }

      .btn.cart {
        font-size: 1rem;
        padding: 0.5rem 1.2rem;
        width: 100%;
        max-width: 180px;
        text-align: center;
        margin-top: auto;
        border-radius: 25px;
      }

      .progress-bar {
        height: 6px;
        margin: 0.3rem 0;
        border-radius: 3px;
      }

      .progress-text {
        font-size: 0.85rem;
      }
    }

    /* Modal Styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }

    .modal-img {
      width: 100%;
      height: 320px;
      object-fit: contain;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    #modalTitle {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .modal-rating {
      font-size: 1.4rem;
      color: #ffbf00;
      margin-bottom: 1rem;
    }

    #modalDesc {
      font-size: 1.05rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .modal-price {
      font-size: 1.6rem;
      font-weight: bold;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .modal-cart-container {
      margin-bottom: 1rem;
    }

    .modal-cart-controls {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .modal-cart-btn {
      padding: 0.5rem 1rem;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
    }

    .modal-quantity-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-qty-display {
      min-width: 30px;
      text-align: center;
    }

    .modal-wishlist-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: #666;
    }

    .modal-wishlist-btn.active {
      color: #ff4757;
    }

    .reviews-section h4 {
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .review-item {
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--light-gray);
      border-radius: 8px;
    }

    .review-user {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .review-rating {
      color: #ffbf00;
      margin-bottom: 0.5rem;
    }

    .review-comment {
      font-style: italic;
    }

    /* Wishlist and Cart Modal Items */
    .wishlist-item, .cart-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
    }

    .wishlist-item:last-child, .cart-item:last-child {
      border-bottom: none;
    }

    .wishlist-img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
    }

    .wishlist-details {
      flex: 1;
    }

    .wishlist-details h4 {
      margin: 0 0 0.5rem 0;
      font-size: 1.1rem;
    }

    .wishlist-price {
      color: var(--primary-color);
      font-weight: 600;
    }

    .remove-btn {
      background: #ff4757;
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cart-quantity-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .qty-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .qty-display {
      min-width: 30px;
      text-align: center;
      font-weight: 600;
    }

    .cart-total {
      text-align: center;
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--primary-color);
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 2px solid var(--border-color);
    }
  </style>
</head>
<body>
  <header class="main-header">
    <div class="container">
      <a href="index.html" class="logo" id="logo">MegaMart</a>

      <nav class="main-nav">
        <a href="index.html" id="home">Home</a>
        <a href="products.html" id="products">Products</a>
        <a href="deals.html" id="deals">Deals</a>
        <a href="about.html" id="about">About</a>
        <a href="contact.html" id="contact">Contact</a>
      </nav>

      <div class="header-actions">
        <button class="hamburger-btn" aria-label="Menu">
          <i data-lucide="menu"></i>
        </button>

        <button class="wishlist-btn" aria-label="Wishlist">
          <i data-lucide="heart"></i>
          <span class="wishlist-count">0</span>
        </button>

        <button class="cart-btn" aria-label="Shopping Cart">
          <i data-lucide="shopping-cart"></i>
          <span class="cart-count">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <button class="mobile-menu-close" aria-label="Close Menu">
      <i data-lucide="x"></i>
    </button>
    <nav class="mobile-nav">
      <a href="index.html" id="mobile-home">Home</a>
      <a href="products.html" id="mobile-products">Products</a>
      <a href="deals.html" id="mobile-deals">Deals</a>
      <a href="about.html" id="mobile-about">About</a>
      <a href="contact.html" id="mobile-contact">Contact</a>
      <a href="login.html" class="mobile-auth-btn">Login/Signup</a>
    </nav>
  </div>

  <script>
    // Initialize Lucide icons for header
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  </script>

  <main role="main" aria-label="Deals Page Content">
    <section class="deals-page">
      <div class="hero-content">
        <h1>ðŸŽ‰ Mega Deals Extravaganza!</h1>
        <p>Up to 70% off on thousands of products. Limited time offers!</p>
        <div class="hero-stats">
          <div>
            <h2>1000+</h2>
            <p>Products on Sale</p>
          </div>
          <div>
            <h2>70%</h2>
            <p>Max Discount</p>
          </div>
          <div>
            <h2>24hrs</h2>
            <p>Limited Time</p>
          </div>
        </div>
      </div>

      <!-- Deal of the Day -->
      <div class="deal-of-the-day">
        <div class="deal-badge">âš¡ DEAL OF THE DAY</div>
        <div class="deal-content">
          <h3>iPhone 15 Pro Max</h3>
          <p>
            Experience the future with iPhone 15 Pro Max. Featuring the powerful A17 Pro chip,
            advanced camera system, and stunning titanium design. Limited time offer!
          </p>
          <div class="deal-info">
            <span class="price">â‚¹1,29,999/-</span>
            <span class="old-price">â‚¹1,59,900/-</span>
            <span class="discount">Save 19%</span>
          </div>
          <div class="countdown" id="dealCountdown">
            <div class="countdown-item">
              <span id="countdown-hours">00</span>
              <small>Hours</small>
            </div>
            <div class="countdown-item">
              <span id="countdown-minutes">00</span>
              <small>Minutes</small>
            </div>
            <div class="countdown-item">
              <span id="countdown-seconds">00</span>
              <small>Seconds</small>
            </div>
          </div>
          <div class="deal-actions">
            <a href="products.html" class="btn deal-btn primary">Shop Now</a>
            <button class="btn deal-btn secondary" onclick="addToCart('iPhone 15 Pro Max')">
              <i data-lucide="shopping-cart"></i> Add to Cart
            </button>
          </div>
        </div>
        <div class="deal-image">
          <img
            src="https://images.unsplash.com/photo-1695048133142-1a20484d2569?q=80&w=870&auto=format&fit=crop"
            alt="iPhone 15 Pro Max"
            loading="lazy"
          />
          <div class="deal-sticker">HOT</div>
        </div>
      </div>

      <!-- Deal Categories -->
      <div class="deal-categories">
        <div class="category-tabs">
          <button class="tab-btn active" data-category="all">All Deals</button>
          <button class="tab-btn" data-category="electronics">Electronics</button>
          <button class="tab-btn" data-category="fashion">Fashion</button>
          <button class="tab-btn" data-category="home">Home & Living</button>
        </div>
      </div>

      <!-- Hot Deals Grid -->
      <div class="hot-deals">
        <h3>ðŸ”¥ Flash Deals - Don't Miss Out!</h3>
        <div class="product-grid" id="productGrid"></div>
      </div>

      <!-- Newsletter Section -->
      <div class="newsletter-section">
        <div class="newsletter-content">
          <h3>ðŸ”” Never Miss a Deal!</h3>
          <p>Subscribe to get exclusive deals and early access to sales</p>
          <div class="newsletter-form">
            <input type="email" placeholder="Enter your email" id="newsletter-email">
            <button class="btn" id="subscribe-btn">Subscribe</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modals -->
  <div class="modal" id="productModal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-describedby="modalDesc" style="display: none;">
    <div class="modal-content" role="document">
      <button class="modal-close" aria-label="Close Modal">&times;</button>
      <img src="" alt="" class="modal-img" />
      <h3 id="modalTitle"></h3>
      <div class="modal-rating" aria-label="Rating"></div>
      <p id="modalDesc"></p>
<div class="modal-price"></div>
<div class="modal-cart-container"></div>
<hr />
<section class="reviews-section" id="modalReviews"></section>
    </div>
  </div>

  !-- Wishlist Modal -->
  <div class="modal" id="wishlistModal" aria-hidden="true" role="dialog" aria-labelledby="wishlistTitle">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close Wishlist">Ã—</button>
      <h3 id="wishlistTitle">Your Wishlist</h3>
      <div id="wishlistItems"></div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="modal" id="cartModal" aria-hidden="true" role="dialog" aria-labelledby="cartTitle">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close Cart">Ã—</button>
      <h3 id="cartTitle">Your Shopping Cart</h3>
      <div id="cartItems"></div>
    </div>
  </div>

  <!-- Order Success Modal -->
  <div class="modal" id="orderSuccessModal" aria-hidden="true" role="dialog" aria-labelledby="orderSuccessTitle">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close">&times;</button>
      <h3 id="orderSuccessTitle">Order Placed Successfully!</h3>
      <p>Your order has been placed. Thank you for shopping with us!</p>
      <button class="place-order-btn" id="continueShoppingBtn">Continue Shopping</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 MegaMart. All rights reserved.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/lucide/dist/umd/lucide.js"></script>
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lucide/dist/umd/lucide.js"></script>
  <script src="script.js"></script>
  <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

    // Get cart item by title
    function getCartItem(title) {
      title = title.replace(/\\'/g, "'");
      return cart.find(item => item.title === title);
    }

    // Deals-specific product data
    const productData = [
      {
        title: 'MacBook Air M2',
        img: 'https://images.unsplash.com/photo-1541807084-5c52b6b3adef?q=80&w=870&auto=format&fit=crop',
        price: 'â‚¹99,999',
        oldPrice: 'â‚¹1,19,900',
        progress: 75,
        category: 'electronics',
        rating: 5,
        desc: 'Lightweight and powerful MacBook with M2 chip.',
        reviews: [
          { user: 'John D.', rating: 5, comment: 'Amazing performance!' },
          { user: 'Jane S.', rating: 4, comment: 'Great battery life.' }
        ]
      },
      {
        title: 'Nike Air Max 270',
        img: 'https://images.unsplash.com/photo-1549298916-b41d501d3772?q=80&w=774&auto=format&fit=crop',
        price: 'â‚¹8,999',
        oldPrice: 'â‚¹12,999',
        progress: 60,
        category: 'fashion',
        rating: 5,
        desc: 'Comfortable sneakers with Air cushioning.',
        reviews: [
          { user: 'Mike R.', rating: 5, comment: 'Very comfortable.' },
          { user: 'Sarah L.', rating: 5, comment: 'Perfect fit.' }
        ]
      },
      {
        title: 'Smart Home Bundle',
        img: 'https://images.unsplash.com/photo-1730967844913-29eb5cae5f34?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        price: 'â‚¹15,999',
        oldPrice: 'â‚¹22,999',
        progress: 85,
        category: 'home',
        rating: 4,
        desc: 'Complete smart home setup with lights and speakers.',
        reviews: [
          { user: 'Alex T.', rating: 4, comment: 'Easy to install.' },
          { user: 'Emma W.', rating: 5, comment: 'Love the integration.' }
        ]
      },
      {
        title: 'Sony WH-1000XM5',
        img: 'https://images.unsplash.com/photo-1583394838336-acd977736f90?q=80&w=870&auto=format&fit=crop',
        price: 'â‚¹24,999',
        oldPrice: 'â‚¹34,999',
        progress: 40,
        category: 'electronics',
        rating: 5,
        desc: 'Premium noise-cancelling headphones.',
        reviews: [
          { user: 'Chris B.', rating: 5, comment: 'Best noise cancellation.' },
          { user: 'Lisa M.', rating: 5, comment: 'Sound quality is excellent.' }
        ]
      },
      {
        title: "Levi's Denim Jacket",
        img: 'https://plus.unsplash.com/premium_photo-1661340768191-986944b36150?q=80&w=1169&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        price: 'â‚¹3,999',
        oldPrice: 'â‚¹5,999',
        progress: 90,
        category: 'fashion',
        rating: 4,
        desc: 'Classic denim jacket for all seasons.',
        reviews: [
          { user: 'Tom H.', rating: 4, comment: 'Good quality material.' },
          { user: 'Anna K.', rating: 5, comment: 'Fits perfectly.' }
        ]
      },
      {
        title: 'Kitchen Appliance Set',
        img: 'https://images.unsplash.com/photo-1570222094114-d054a817e56b?q=80&w=1205&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
        price: 'â‚¹7,999',
        oldPrice: 'â‚¹12,999',
        progress: 55,
        category: 'home',
        rating: 5,
        desc: 'Essential kitchen appliances bundle.',
        reviews: [
          { user: 'David P.', rating: 5, comment: 'Great value for money.' },
          { user: 'Rachel G.', rating: 5, comment: 'Easy to use.' }
        ]
      },
      {
        title: 'iPhone 15 Pro Max',
        img: 'https://images.unsplash.com/photo-1695048133142-1a20484d2569?q=80&w=870&auto=format&fit=crop',
        price: 'â‚¹1,29,999',
        oldPrice: 'â‚¹1,59,900',
        progress: 20,
        category: 'electronics',
        rating: 5,
        desc: 'Latest iPhone with advanced features.',
        reviews: [
          { user: 'Steve J.', rating: 5, comment: 'Incredible camera.' },
          { user: 'Maria V.', rating: 5, comment: 'Smooth performance.' }
        ]
      }
    ];

    // Get badge based on progress
    function getBadge(progress) {
      if (progress >= 90) return 'hot';
      if (progress >= 75) return 'bestseller';
      if (progress >= 60) return 'trending';
      if (progress >= 40) return 'new';
      return 'discount';
    }

    // Get badge display text
    function getBadgeText(badgeClass) {
      const texts = {
        hot: 'HOT',
        bestseller: 'BESTSELLER',
        trending: 'TRENDING',
        new: 'NEW',
        discount: 'DISCOUNT'
      };
      return texts[badgeClass] || '';
    }

    // Get cart controls HTML
    function getCartControlsHTML(title) {
      return `<button class="btn cart" onclick="addToCart('${title}')">Add to Cart</button>`;
    }

    // Load deals products dynamically
    function loadDealsProducts() {
      const productGrid = document.getElementById('productGrid');
      productGrid.innerHTML = '';

      productData.forEach(product => {
        const { title, img, price, oldPrice, progress, category, rating } = product;
        const safeTitle = title.replace(/'/g, "\\'");

        const existingItem = getCartItem(title);
        const currentQty = existingItem ? existingItem.quantity : 0;

        let cartHtml;
        if (currentQty > 0) {
          cartHtml = `
            <div class="quantity-container">
              <button class="qty-btn minus" onclick="updateCartQuantity('${safeTitle}', -1)">-</button>
              <span class="qty-display">${currentQty}</span>
              <button class="qty-btn plus" onclick="updateCartQuantity('${safeTitle}', 1)">+</button>
            </div>
          `;
        } else {
          cartHtml = `
            <div class="cart-btn-container">
              <button class="btn cart" onclick="addToCart('${safeTitle}')">Add to Cart</button>
            </div>
          `;
        }

        const badgeClass = getBadge(progress);
        const badgeText = getBadgeText(badgeClass);

        const productDiv = document.createElement('div');
        productDiv.className = 'product';
        productDiv.setAttribute('data-category', category);
        productDiv.setAttribute('data-title', title);

        productDiv.innerHTML = `
          <div class="img-wrapper">
            <img src="${img}" alt="${title}" loading="lazy" />
            <button class="btn-icon" onclick="openModal('${safeTitle}')" aria-label="View Details">
              <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7-10-7-10-7z"></path>
              </svg>
            </button>
            <button class="wishlist-btn-product" onclick="toggleWishlist('${safeTitle}')" aria-label="Add to Wishlist">
              <i data-lucide="heart"></i>
            </button>
          </div>
          ${badgeText ? `<div class="product-badge ${badgeClass}">${badgeText}</div>` : ''}
          <div class="product-info">
            <h3>${title}</h3>
            <div class="rating" aria-label="Rating: ${rating} out of 5 stars">
              ${'â˜…'.repeat(rating)}${'â˜†'.repeat(5 - rating)}
            </div>
            <div class="price-info">
              <span class="price">${price}/-</span>
              <span class="old-price">${oldPrice}/-</span>
              <div class="progress-bar">
                <div class="progress" style="width: ${progress}%"></div>
              </div>
              <div class="progress-text">${progress}% claimed</div>
            </div>
            ${cartHtml}
          </div>
        `;

        productGrid.appendChild(productDiv);
      });

      updateWishlistButtons();
      lucide.createIcons();
    }

    // Open product modal
    function openModal(title) {
      title = title.replace(/\\'/g, "'");
      const product = productData.find(p => p.title === title);
      if (!product) return;

      document.getElementById('modalTitle').textContent = product.title;
      document.querySelector('.modal-img').src = product.img;
      document.querySelector('.modal-img').alt = product.title;
      document.querySelector('.modal-rating').textContent = 'â˜…'.repeat(product.rating) + 'â˜†'.repeat(5 - product.rating);
      document.getElementById('modalDesc').textContent = product.desc;
      document.querySelector('.modal-price').textContent = `${product.price}/-`;

      // Reviews
      const reviewsSection = document.getElementById('modalReviews');
      if (reviewsSection) {
        reviewsSection.innerHTML = '<h4>Customer Reviews</h4>';
        product.reviews.forEach(review => {
          const reviewDiv = document.createElement('div');
          reviewDiv.className = 'review-item';
          reviewDiv.innerHTML = `
            <div class="review-user">${review.user}</div>
            <div class="review-rating">${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5 - review.rating)}</div>
            <div class="review-comment">${review.comment}</div>
          `;
          reviewsSection.appendChild(reviewDiv);
        });
      }

      updateModalCartControls(title);

      document.getElementById('productModal').classList.add('show');
      document.getElementById('productModal').setAttribute('aria-hidden', 'false');
      lucide.createIcons(); // For modal wishlist icon
    }

    // Update modal cart controls based on current quantity
    function updateModalCartControls(title) {
      const existingItem = getCartItem(title);
      const currentQty = existingItem ? existingItem.quantity : 0;

      // Wishlist button in modal
      const isInWishlist = wishlist.some(item => item.title === title);
      const modalWishlistBtn = `<button class="modal-wishlist-btn ${isInWishlist ? 'active' : ''}" onclick="toggleWishlist('${title}')">
        <i data-lucide="heart"></i>
      </button>`;

      let cartHtml;
      if (currentQty > 0) {
        cartHtml = `
          <div class="modal-cart-controls">
            <div class="modal-quantity-container">
              <button class="qty-btn minus" onclick="updateModalQuantity('${title}', -1)">-</button>
              <span class="modal-qty-display">${currentQty}</span>
              <button class="qty-btn plus" onclick="updateModalQuantity('${title}', 1)">+</button>
            </div>
          </div>
          ${modalWishlistBtn}
        `;
      } else {
        cartHtml = `
          <div class="modal-cart-controls">
            <button class="modal-cart-btn" onclick="addToCart('${title}')">Add to Cart</button>
          </div>
          ${modalWishlistBtn}
        `;
      }

      const modalCartContainer = document.querySelector('.modal-cart-container');
      modalCartContainer.innerHTML = cartHtml;
    }

    // Update modal quantity
    function updateModalQuantity(title, delta) {
      updateCartQuantity(title, delta);
      updateModalCartControls(title);
    }

    // Toggle wishlist
    function toggleWishlist(title) {
      title = title.replace(/\\'/g, "'");
      const product = productData.find(p => p.title === title);
      if (!product) return;

      const index = wishlist.findIndex(item => item.title === title);
      if (index > -1) {
        wishlist.splice(index, 1);
      } else {
        wishlist.push(product);
      }

      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      updateCounts();
      updateWishlistButtons();
      populateWishlistModal();
      // Update modal wishlist button if open
      const modalWishlistBtn = document.querySelector('.modal-wishlist-btn');
      if (modalWishlistBtn && document.getElementById('productModal').classList.contains('show')) {
        const modalTitle = document.getElementById('modalTitle').textContent;
        if (modalTitle === title) {
          const isInWishlist = wishlist.some(item => item.title === title);
          modalWishlistBtn.classList.toggle('active', isInWishlist);
        }
      }
    }

    // Add to cart (initial add)
    function addToCart(title) {
      title = title.replace(/\\'/g, "'");
      const product = productData.find(p => p.title === title);
      if (!product) return;

      // Add with quantity 1 if not exists
      if (!getCartItem(title)) {
        cart.push({ ...product, quantity: 1 });
      }

      // Ensure no undefined items
      cart = cart.filter(item => item && item.title && item.price);

      localStorage.setItem('cart', JSON.stringify(cart));
      updateCounts();
      populateCartModal();
      loadDealsProducts();

      // Update modal cart controls if modal is open
      if (document.getElementById('productModal').classList.contains('show')) {
        const modalTitle = document.getElementById('modalTitle').textContent;
        if (modalTitle === title) {
          updateModalCartControls(title);
        }
      }
    }

    // Update cart quantity
    function updateCartQuantity(title, delta) {
      title = title.replace(/\\'/g, "'");
      const product = productData.find(p => p.title === title);
      if (!product) return;

      let existing = getCartItem(title);
      if (existing) {
        existing.quantity += delta;
        if (existing.quantity <= 0) {
          cart = cart.filter(item => item.title !== title);
        }
      } else if (delta > 0) {
        cart.push({ ...product, quantity: 1 });
      }

      // Ensure no undefined items
      cart = cart.filter(item => item && item.title && item.price);

      localStorage.setItem('cart', JSON.stringify(cart));
      updateCounts();
      populateCartModal();
      loadDealsProducts();

      // Update modal cart controls if modal is open
      if (document.getElementById('productModal').classList.contains('show')) {
        const modalTitle = document.getElementById('modalTitle').textContent;
        if (modalTitle === title) {
          updateModalCartControls(title);
        }
      }
    }

    // Update counts in navbar
    function updateCounts() {
      document.querySelector('.wishlist-count').textContent = wishlist.length;
      document.querySelector('.cart-count').textContent = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
    }

    // Update wishlist button states
    function updateWishlistButtons() {
      document.querySelectorAll('.wishlist-btn-product').forEach(btn => {
        const titleMatch = btn.getAttribute('onclick').match(/'([^']+)'/);
        if (titleMatch) {
          let title = titleMatch[1];
          title = title.replace(/\\'/g, "'");
          const isInWishlist = wishlist.some(item => item.title === title);
          btn.classList.toggle('active', isInWishlist);
        }
      });
    }

    // Setup modal closers
    function setupModalClosers() {
      document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', function() {
          this.closest('.modal').classList.remove('show');
          this.closest('.modal').setAttribute('aria-hidden', 'true');
        });
      });

      // Close on outside click
      document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
          if (e.target === this) {
            this.classList.remove('show');
            this.setAttribute('aria-hidden', 'true');
          }
        });
      });
    }

    // Setup navbar buttons
    function setupNavbarButtons() {
      document.querySelector('.wishlist-btn').addEventListener('click', function() {
        populateWishlistModal();
        document.getElementById('wishlistModal').classList.add('show');
        document.getElementById('wishlistModal').setAttribute('aria-hidden', 'false');
      });

      document.querySelector('.cart-btn').addEventListener('click', function() {
        populateCartModal();
        document.getElementById('cartModal').classList.add('show');
        document.getElementById('cartModal').setAttribute('aria-hidden', 'false');
      });
    }

    // Populate wishlist modal
    function populateWishlistModal() {
      const wishlistItems = document.getElementById('wishlistItems');
      wishlistItems.innerHTML = '';

      if (wishlist.length === 0) {
        wishlistItems.innerHTML = '<p>Your wishlist is empty.</p>';
        return;
      }

      wishlist.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'wishlist-item';
        itemDiv.innerHTML = `
          <img src="${item.img}" alt="${item.title}" class="wishlist-img" />
          <div class="wishlist-details">
            <h4>${item.title}</h4>
            <div class="wishlist-price">${item.price}/-</div>
          </div>
          <button class="remove-btn" onclick="removeFromWishlist('${item.title}')">&times;</button>
        `;
        wishlistItems.appendChild(itemDiv);
      });
    }

    // Populate cart modal
    function populateCartModal() {
      const cartItems = document.getElementById('cartItems');
      cartItems.innerHTML = '';

      // Ensure no undefined items
      cart = cart.filter(item => item && item.title && item.price);

      if (cart.length === 0) {
        cartItems.innerHTML = '<p>Your cart is empty.</p>';
        return;
      }

      cart.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'cart-item';
        itemDiv.innerHTML = `
          <img src="${item.img}" alt="${item.title}" class="wishlist-img" />
          <div class="wishlist-details">
            <h4>${item.title}</h4>
            <div class="wishlist-price">${item.price}/-</div>
          </div>
          <div class="cart-quantity-container">
            <button class="qty-btn minus" onclick="updateCartQuantity('${item.title}', -1)">-</button>
            <span class="qty-display">${item.quantity}</span>
            <button class="qty-btn plus" onclick="updateCartQuantity('${item.title}', 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeFromCart('${item.title}')">&times;</button>
        `;
        cartItems.appendChild(itemDiv);
      });
    }

    // Remove from wishlist
    function removeFromWishlist(title) {
      wishlist = wishlist.filter(item => item.title !== title);
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      updateCounts();
      updateWishlistButtons();
      populateWishlistModal();
    }

    // Remove from cart
    function removeFromCart(title) {
      cart = cart.filter(item => item.title !== title);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCounts();
      populateCartModal();
    }

    // Countdown timer
    function startCountdown() {
      const now = new Date();
      const endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0, 0); // Next midnight
      const end = endOfDay.getTime();
      const countdown = setInterval(() => {
        const distance = end - new Date().getTime();
        const hours = Math.floor(distance / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        document.getElementById('countdown-hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('countdown-minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('countdown-seconds').textContent = seconds.toString().padStart(2, '0');
        if (distance < 0) {
          clearInterval(countdown);
          document.getElementById('dealCountdown').innerHTML = '<p>Deal Expired!</p>';
        }
      }, 1000);
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', function() {
      updateCounts();
      setupModalClosers();
      setupNavbarButtons();

      const tabBtns = document.querySelectorAll('.tab-btn');

      tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const category = btn.dataset.category;
          tabBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');

          document.querySelectorAll('.product').forEach(product => {
            if (category === 'all' || product.dataset.category === category) {
              product.style.display = 'block';
            } else {
              product.style.display = 'none';
            }
          });
        });
      });

      loadDealsProducts();

      // Newsletter
      document.getElementById('subscribe-btn').addEventListener('click', () => {
        const email = document.getElementById('newsletter-email').value;
        if (email) {
          alert('Subscribed successfully!');
          document.getElementById('newsletter-email').value = '';
        } else {
          alert('Please enter your email.');
        }
      });

      startCountdown();
      lucide.createIcons();
    });
  </script>
</body>
</html>
